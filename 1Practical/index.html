<!doctype html>
<html lang="en">
<head>
	<title>Practical 2</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
</head>
<body>

<script src="js/three.min.js"></script>
<script src="js/dat.gui.min.js"></script> <!-- a GUI framework for js -->
<script src="js/OrbitControls.js"></script>
<script src='js/threex.keyboardstate.js'></script>
<script src="js/Detector.js"></script> <!-- detects which opengl version is running -->

<!-- js files from practicals -->

<script src="practical-js/constants-practical.js"></script>
<script src="practical-js/camera-practical.js"></script>
<script src="practical-js/gui-practical.js"></script>
<script src="practical-js/helpers-practical.js"></script>
<script src="practical-js/keyboard-practical.js"></script>
<script src="practical-js/lights-practical.js"></script>
<script src="practical-js/textures-practical.js"></script>
<script src="practical-js/models-practical.js"></script>

<!-- load e.g. practical-js/constants-practical.js -->

<div id="ThreeJS" style="position: absolute; left:0px; top:0px"></div>
<script>

	// Complain if no webgl available, runs checker from Detector.js:
	if ( ! Detector.webgl ) Detector.addGetWebGLMessage();

	var scene, camera, renderer;
	var cube, material, mesh;
	var delta = 100;
	var sun_radius = 10900;
	var segments = 20;

	init();
	animate();

	function init() {
		// create a scene
		scene = new THREE.Scene();
		loadTextures();
		// create a perspective camera
		camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 1, 10000000);
		camera.position.z = 80000;

		sphere = new THREE.SphereGeometry( radii[0], segments, segments);
		material = new THREE.MeshBasicMaterial( { color: 0xffff00, wireframe: false } );
		material.map = THREE.ImageUtils.loadTexture('images/sunmap.jpg')
		mesh = new THREE.Mesh( sphere, material );
		mesh.position.x = 500;
		scene.add( mesh );


		axesHelper();
		gridHelper();
		loadTextures();
		initGUI();
		// create a renderer
		renderer = new THREE.WebGLRenderer();
		renderer.setSize( window.innerWidth, window.innerHeight ); // set its size
		document.body.appendChild( renderer.domElement ); // append to the html

		window.addEventListener( 'resize', onWindowResize, false );
		function onWindowResize()  {
			camera.aspect = window.innerWidth / window.innerHeight;
			renderer.setSize( window.innerWidth, window.innerHeight );
		};

		window.addEventListener("keydown", onDocumentKeyDown, false);
		function onDocumentKeyDown(event) {
		    var keyCode = event.which;
		    getKeyInput(keyCode);
		};

		controls = new THREE.OrbitControls(camera);



	}

	function rotateCube() {
		mesh.rotation.x -= .01;
		mesh.rotation.y -= .02;
	}


	function updateControls() {
  		controls.update();
  }

	function updateMovement() {
		requestAnimationFrame( animate );
		getKeyInput();
	}

	function animate() {

		//rotateCube();
		updateMovement();// make the objects in the scene move
		renderer.render( scene, camera );
		updateControls();


	}


</script>
</body>
</html>
